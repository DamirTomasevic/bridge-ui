package encoding

import (
	"testing"

	"github.com/ethereum/go-ethereum/common"
	"github.com/ethereum/go-ethereum/common/hexutil"
	"gopkg.in/go-playground/assert.v1"
)

func Test_EncodeABISignalProof(t *testing.T) {
	s := []HopProof{
		{
			ChainID:      1,
			BlockID:      1,
			RootHash:     common.BigToHash(common.Big256),
			CacheOption:  0,
			AccountProof: [][]byte{{}},
			StorageProof: [][]byte{},
		},
	}

	// nolint: lll
	want := "0x000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
	proof, err := EncodeHopProofs(s)
	assert.Equal(t, nil, err)
	assert.Equal(t, hexutil.Encode(proof), want)
}
